---
jupyter:
  jupytext:
    text_representation:
      extension: .Rmd
      format_name: rmarkdown
      format_version: '1.2'
      jupytext_version: 1.10.2
  kernelspec:
    display_name: Python 3
    language: python
    name: python3
---

```{python}
def cal_dm(atk,df):
    dm = abs(atk-df)
    if dm > 0:
        return dm
    else:
        return 0
    
class player:
    
    def __init__(self,name, ATK, DEF, atk_speed, blood):
        self.ATK = ATK
        self.DEF = DEF
        self.atk_speed = atk_speed
        self.blood = blood
        self.damage = 0
        self.name = name
    def attack(self, comp):
        
        selfDM = cal_dm(comp.ATK, self.DEF)
        compDM = cal_dm(self.ATK, comp.DEF)
        
        selfNumberOfAtk = comp.blood/compDM
        compNumberOfAtk = self.blood/selfDM
        
        selfTimeToDie = compNumberOfAtk*comp.atk_speed
        compTimeToDie = selfNumberOfAtk*self.atk_speed
        
        if selfTimeToDie > compTimeToDie:
            print(f'{self.name} win')   
        elif selfTimeToDie < compTimeToDie:
            print(f'{comp.name} win')
        else:
            print('Die together')
```

```{python}
a = player('a',100,50,1,100)
b = player('b',100,50,1,10000)

a.attack(b)
```

```{python}
import numpy as np
```

```{python}
a = np.zeros(100).reshape(10,10)
b = np.ones(4).reshape(2,2)
a[4:6, 4:6] = b
```

```{python}
a + a
```

```{python}
a[:3,:5]
```

```{python}
class Canvas:
    def __init__(self, width, height):
        self.width = width
        self.height = height
        self.area = width * height
        
class Sml_rec:
    def __init__(self, width, height, flip, bound):
        
        self.f = flip
        self.bound = bound
        if flip:
            self.width = width
            self.height = height
            self.area = width * height
            self.p1 = np.random.randint(0, bound.height - self.height)
            self.p2 = np.random.randint(0, bound.width - self.width)
        else:
            
            self.width = height
            self.height = width
            self.area = width * height
            self.p1 = np.random.randint(0, bound.height - self.height)
            self.p2 = np.random.randint(0, bound.width - self.width)
            
        self.dna = '{0:08b}'.format(self.p1) + '{0:08b}'.format(self.p2) + f'{self.f}'

        
    
    def it(self):
        a = np.zeros(bound.area).reshape(bound.height,bound.width)
        b = np.ones(self.area).reshape(self.height,self.width)
        a[self.p1:self.p1 + self.height, self.p2:self.p2 + self.width] = b
    
        return a
    
    def xover(self,other):
        par1 = self.dna
        par2 = other.dna
        position1 = np.random.randint(0, len(par1))
        position2 = np.random.randint(0, len(par2))
        
        chd1_dna = par1[:position2] + par2[position1] +  par1[position2+1:]
        chd2_dna = par2[:position1] + par1[position1] +  par2[position1+1:]
        
        chd1 = Sml_rec(int(chd1_dna[:8],2), int(chd1_dna[8:16],2), int(chd1_dna[-1],2), bound)
        chd2 = Sml_rec(int(chd2_dna[:8],2), int(chd2_dna[8:16],2), int(chd2_dna[-1],2), bound)
        return (chd1, chd2)
    
    def mutate(self):
        position = np.random.randint(0, len(self.dna))
        if self.dna[position] == '1':
            self.dna = self.dna[:position] + '1' + self.dna[position+1:]
        else:
            self.dna = self.dna[:position] + '0' + self.dna[position+1:]
```

```{python}
bound = Canvas(255,255)
```

```{python}
a = Sml_rec(10,5,0,bound)
b = Sml_rec(10,5,0,bound)
```

```{python}
ch1, ch2 = a.xover(b)
```

```{python}
ch1.it()
```

```{python}
ch1.dna
```

```{python}
ch1.mutate()
```

```{python}
ch1.dna
```
